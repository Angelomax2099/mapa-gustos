<!-- Librería Globe.gl (usa Three.js) -->
<script src="https://unpkg.com/globe.gl"></script>
<script>
  // Crear el globo
  const globeEl = document.getElementById('globe');
  const globe = Globe()(globeEl)
    .globeImageUrl('https://unpkg.com/three-globe/example/img/earth-dark.jpg')
    .bumpImageUrl('https://unpkg.com/three-globe/example/img/earth-topology.png')
    .backgroundColor('rgba(0,0,0,0)');

  // Controles: sin autorotate nativo, porque lo haremos manual
  globe.controls().autoRotate = false;

  // Tamaño responsivo
  function fit(){
    globe.width(window.innerWidth).height(window.innerHeight);
  }
  window.addEventListener('resize', fit);
  fit();

  // Iluminación y atmósfera sutil (API pública)
  globe.scene().fog = null;
  globe.atmosphereColor('#6ee7b7');
  globe.atmosphereAltitude(0.18);

  // Rotación automática manual
  let auto = true;
  let last = Date.now();

  function animate(){
    requestAnimationFrame(animate);
    const now = Date.now();
    const dt = (now - last) / 1000;
    last = now;

    if (auto) {
      const rotSpeed = 0.02; // rad/s aprox
      globe.rotation.y += rotSpeed * dt; // rota el objeto del globo (oeste → este)
    }
  }
  animate();

  // Botón de pausa/continuar
  function toggleAutoRotate(){ auto = !auto; }
  window.toggleAutoRotate = toggleAutoRotate; // por si acaso

  // Puntos de ejemplo
  const puntos = [
    {lat:19.4326, lng:-99.1332, size:0.6, color:'#22c55e'}, // CDMX
    {lat:40.7128, lng:-74.0060, size:0.6, color:'#38bdf8'}, // NYC
    {lat:48.8566, lng:2.3522,  size:0.6, color:'#f472b6'}   // París
  ];
  globe
    .pointsData(puntos)
    .pointAltitude('size')
    .pointColor('color')
    .pointRadius(0.6);
</script>
